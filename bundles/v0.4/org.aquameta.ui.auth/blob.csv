\\x00270cf63f93c307e7e9d2cc7e639fa50aca58eeb64be3266a798c9c19535219	logout
\\x003db2a54f359de2452894e71b52f220141fcb9ba84167ba5fe2b83c9832ecf7	96a56257-8ebd-4341-b175-af151a4e4db3
\\x029fcc1f0cca6ab714c924dbb8d39c87819312fb8c44c91717c2980b210d6f97	var w = $("#"+id);\n\n\nw.find('button.logout').click(function() {\n    db.schema('auth').table('session').row().where({\n        token: getCookie('SESSION')\n    }).result(function(row) {\n        row.delete().done(function() {\n\t        location.reload(true);\n        });\n    });\n});\n
\\x0ba9b693da6b2dbb83cee744e953ac5cb5f3d2cb93a4a0550b607a7fdcca02c2	.{{= name }} {\n}
\\x0c35782078ce192c9997c6f30a79de32fe645cfeac600606a61c13cc041d4cc9	var w = $("#"+id);\nvar username = false;\n\nconsole.log("Authenticating........");\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\n\nendpoint.schema('endpoint').view('current_user').row()\n.then(function( user ) {\n    \n    // console.log('current_user = ', user);\n    \n    w.trigger('current_user', { user_row: user });\n    if (user.get('id') != 'anonymous') {\n        w.find('.logged_in').show();\n    } else {\n        w.find('.anonymous').show();\n    }\n})\n.catch(function(e,o) {\n    w.trigger('current_user_anonymous');\n});\n\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row().where({\n        token: getCookie('SESSION')\n    }).result(function(row) {\n        row.delete().done(function() {\n\t        location.reload(true);\n        });\n    });\n});\n\n
\\x11dd5669265543e43b95f63238127dc08febf99fb591dfab668d9da52feae1a7	.{{= name }} .logged_in {\n    display: none;\n}\n\n.{{= name }} .anonymous {\n    display: none;\n}
\\x139ae1c6b8552cf8c6204deff12ab9eeec72866e56d0790607d033959970ee2b	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Confirm Registration</title>\n        <script src='/js/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="code" class="textbox" type="password" name="code" placeholder="Registration Code" />\n            <input id="submit" type="submit" value="Verify">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.1', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register_confirm', [ $('#email').val(), $('#code').val() ])\n                    .then(function() {\n                        $('#message').text('Registration confirmed. Redirecting...');\n                        setTimeout(function() {\n                            window.location = '/login' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\x17e669c4bed8e0c6b4240c14979d07aa5f9a1009e0660a7481fef404cdfef633	var w = $("#"+id);\n\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row({\n        where: {\n            token: getCookie('SESSION')\n        }\n    }).then(function(row) {\n        row.delete().then(function() {\n            alert('logged out');\n        });\n    });\n});\n
\\x1a20dc7f71aceec5bbc302a81d9929bdbf705981448cf0cfa26bb27c1f11ec57	var w = $("#"+id);\nvar username = false;\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\n\nendpoint.schema('endpoint').view('current_user').row().then(function( current_user ) {\n    var user = current_user.get('current_user');\n    if (user != 'anonymous') {\n        w.find('.logged_in .username').html(user);\n        w.find('.logged_in').show();\n    } else {\n        // w.find('.anonymous').show();\n    }\n});\n\n\nw.find('button').click(function() {\n    endpoint.schema('auth').table('session').row().where({\n        token: getCookie('SESSION')\n    }).result(function(row) {\n        row.delete().done(function() {\n\t        location.reload(true);\n        });\n    });\n});\n\n
\\x1a9efd350f55bad8a2257f7ac7f71ec2ba86d847cd3fbb2206f6210faddb2d9b	e091420a-f8ba-4876-b798-69cf6d130b6f
\\x1c7a7e766e812be38d2ae804ad2d9902b144564f6710f00eeb29abf67016593d	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Register</title>\n        <script src='/js/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="confirm_password" class="textbox" type="password" name="confirm_password" placeholder="Confirm Password" />\n            <input id="submit" type="submit" value="Register">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        <p id='confirm_link' class='hide'>You are registered. Click <a href='/confirm'>HERE</a> to enter confirmation code</p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n            \n            var confirm_link = document.getElementById('confirm_link');\n            confirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    // Check that passwords match\n                    if ($('#password').val() != $('#confirm_password').val()) {\n                        $('#message').text('Passwords do not match');\n                        return;\n                    }\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        $('#message').text('Registration succeeded. Redirecting...');\n                        $('#confirm_link').removeClass('hide');\n                        setTimeout(function() {\n                            window.location = '/confirm' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\x1cd2dcbd7eae77dcdc29858075b1cdb4fc19e7e0410b2db1698a8b8916a2ece8	var w = $("#"+id);\n\n/*\nvar confirm_link = document.getElementById('confirm_link');\nconfirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n*/\n\nw.find('button.submit').click(function(e) {\n    // Check that passwords match\n    if (w.find('.password').val() != w.find('.confirm_password').val()) {\n        alert('Passwords do not match');\n        return;\n    }\n    \n\t// call register() function\n    endpoint.schema('endpoint').function('register', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function() {\n        w.replaceWith(widget('register_confirm', { email: w.find('.email').val() }));\n        /*\n        w.find('.message').text('Registration succeeded. Redirecting...');\n        w.find('.confirm_link').removeClass('hide');\n        setTimeout(function() {\n            window.location = '/confirm' + window.location.search;\n        }, 2000);\n        */\n    });\n});\n\nw.find('a.sign_in_link').click(function() {\n    /*\n    // Add redirect to links\n    var login_link = document.getElementById('login_link');\n    w.find('.login_link')[0].setAttribute('href', login_link.getAttribute('href') + window.location.search);\n    */\n\n    \n});
\\x26d6e4f7b34490ec579d0520a2a2abb68c2243b09cd225f8450a1a9d1dbb347f	/login.pretty
\\x28bab15c1f6d9336f8794822a416769e1216b13f124ccad1bce56c52953e462e	<div id="{{= id }}" class="{{= name }}">\n    Logged in: <span class="username"></span><button>logout</button>\n</div>\n
\\x29df02e0e91a7ba7837b9503b5cbafc862f7d07b1b3373216880d736b6f8b6f0	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Confirm Registration</title>\n        <script src='/js/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="code" class="textbox" type="password" name="code" placeholder="Registration Code" />\n            <input id="submit" type="submit" value="Verify">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register_confirm', [ $('#email').val(), $('#code').val() ])\n                    .then(function() {\n                        $('#message').text('Registration confirmed. Redirecting...');\n                        setTimeout(function() {\n                            window.location = '/login' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\x2e08648c956a485cb56ed20aba3a74fd5b3d4c21ef0a82c92cb4a82e3c872c02	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Aquameta - Login</title>\n        <script src='/system.js'></script>        \n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #login_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #login_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #login_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #login_form input#submit {\n                margin-left: 10%;\n            }\n            #login_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="login_form" method='POST'>\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="submit" type="submit" value="Login">\n        </form>\n        <p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\n        <script>\n            // Add a redirect back to this page\n            var reg_link = document.getElementById('register_link');\n            reg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/js/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#login_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    db.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        alert('Logged in!');\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>
\\x312cb81e73e7a6ecc3a31d480b84278d895b1bec99fab37071c1800facc8983b	var w = $("#"+id);\n\n// Add a redirect back to this page\n/*\nvar reg_link = w.find('.register_link')[0];\nreg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n*/\n\n\nw.find('button.submit').click( function(e) {\n    e.preventDefault();\n\n    endpoint.schema('endpoint').function('login', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function(uuid) {\n        console.log(uuid);\n        alert('Logged in: '+uuid);\n    });\n});
\\x3339c4c69499d031ac28a4a425821b923d0abc2481c2e589ac1743d221051f13	<div id="{{= id }}" class="{{= name }}">\n    <div class='auth'></div>\n    <h1>Account</h1>\n    \n    <p>id: <span class='id'></span></p>\n    <p>name: <span class='name'></span></p>\n    <p>email: <span class='email'></span></p>\n    \n</div>
\\x366cddc24761bf3de84dd4448e68e2fb87c83ff796d8f8a8c8a78c9aecfa513f	var w = $("#"+id);\n\n// Add redirect to links\n/*\nvar login_link = document.getElementById('login_link');\nlogin_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n*/\n\nvar _email = false;\n\nif (typeof email != 'undefined') {\n    w.find('.email_show').html(email);\n    _email = email;\n} else {\n    w.find('span.email').show();\n}\n\nw.find('.submit').click(function(e) {\n    if (!_email) {\n        _email = w.find('.email').val();\n    }\n        \n    endpoint.schema('endpoint').function('register_confirm', [\n        _email,\n        w.find('.code').val() \n    ])\n    .then(function() {\n        alert ('ok you are registered.  You may now login.');\n        // w.replaceWith(widget('login', { email: email }));\n        document.location.href = '/login';\n    })\n    .catch(function() {\n        alert ('it failed.');\n    });\n});
\\x370626c06644f9b697eb91ef6276882a975dd6fdde57e1205b1c9ef352761f27	<div id="{{= id }}" class="{{= name }}">\n    <form id="login_form" method='POST'>\n        <input id="email"  class="textbox" name="email" placeholder="Email" />\n        <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n        <input id="submit" type="submit" value="Login">\n    </form>\n    <p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\n</div>
\\x397bc5b423fbb1aa61907639933ac65b8a95e69eda55ccb0f71ca9a29aa340a6	/confirm
\\x398077178664cd34ea3d8bc536bf73826d39402b85e6a826b7fbdf9756f9ef0b	<div id="{{= id }}" class="{{= name }}">\n    <div class='logged_in'>\n        <a href='/account' class="username"></a> <button class='logout'>logout</button>\n    </div>\n    <div class='anonymous'>\n        <a href='/login'>login</a>\n        <a href='/register'>register</a>\n    </div>\n</div>\n
\\x4023f5eff4328f447b8824f27a696977c40682e68d89e39d3be7ee2f2fb60a60	<div id="{{= id }}" class="{{= name }}">\n    <div class='logged_in'>\n        <span class="username"></span> <button class='logout button-danger'>logout</button>\n    </div>\n    <div class='anonymous'>\n    </div>\n</div>\n
\\x428821350e9691491f616b754cd8315fb86d797ab35d843479e732ef90665324	login
\\x441bb226c5de8e2183b8cce3e0928e77066605cdd9c810b9af0eee03265ede01	/account
\\x4938388f0c68650a2120ab03dfbf8e39b08edca0d086b3c3fd02e84e501a5fab	var w = $("#"+id);
\\x4ac8cccb6bd018f25e93524ff247df153619b594ca813328014ecd856441a946	<div id="{{= id }}" class="{{= name }}">\n        <form id="login_form" method='POST'>\n            <input id="email" type="text" class="u-full-width email" name="email" placeholder="Email" />\n            <input id="password" class="u-full-width email " type="password" name="password" placeholder="Password" />\n            <input class="button-primary" id="submit" type="submit" value="Login">\n        </form>\n\t    \n</div>
\\x4b092135d73c8ab36e86826937ce6f73fbb65acb607336317622362bc984cf36	<div id="{{= id }}" class="{{= name }}">\n    <p>\n        email: <input class="email"  class="textbox" name="email" placeholder="Email" /><br>\n        password: <input class="password" type="password" placeholder="Password" /><br>\n        <button class="submit">Login</button>\n    </p>\n</div>
\\x528d9da8d6519240f36380ff336a83be4e960a739f1fa8f48bfe3940fc38dc22	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Aquameta - Login</title>\n        <script src='/system.js'></script>        \n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #login_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #login_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #login_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #login_form input#submit {\n                margin-left: 10%;\n            }\n            #login_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="login_form" method='POST'>\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="submit" type="submit" value="Login">\n        </form>\n        <p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\n        <script>\n            // Add a redirect back to this page\n            var reg_link = document.getElementById('register_link');\n            reg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#login_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    db.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        alert('Logged in!');\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>
\\x5300579197b7a511b64c053e889f8b2a014d6cf7e6cd41f1db4cdbd10d73fc6e	<div id="{{= id }}" class="{{= name }}">\n    <form id="register_form">\n        <input id="email"  class="textbox" name="email" placeholder="Email" />\n        <input id="code" class="textbox" type="password" name="code" placeholder="Registration Code" />\n        <input id="submit" type="submit" value="Verify">\n        <p id='message'></p>\n    </form>\n\n</div>
\\x5e6d266411641806f75440ca4ccc10925c75ddf335616e93b4b2bf17697fab99	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Confirm Registration</title>\n        <script src='/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="code" class="textbox" type="password" name="code" placeholder="Registration Code" />\n            <input id="submit" type="submit" value="Verify">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register_confirm', [ $('#email').val(), $('#code').val() ])\n                    .then(function() {\n                        $('#message').text('Registration confirmed. Redirecting...');\n                        setTimeout(function() {\n                            window.location = '/login' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\x656d3bebd2dcd90cc7ea3c2d81fbc7bdabaafdc9dc21f41354d56e8f50b8a66e	var w = $("#"+id);\n\n// Add redirect to links\n/*\nvar login_link = document.getElementById('login_link');\nlogin_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n*/\n\nw.find('.submit').click(function(e) {\n    endpoint.schema('endpoint').function('register_confirm', [ w.find('.email').val(), w.find('.code').val() ])\n    .then(function() {\n        alert ('ok you are registered');\n    })\n    .fail(function() {\n        alert ('it failed.');\n    });\n});
\\x65fb2413166e87b2f355f75b4a2a5c04474001b1c8e6d5e502390bedfd77fd3b	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Verify</title>\n        <script src='/system.js'></script>\n    </head>\n    <body>\n        <h1>Verify Registration</h1>\n        \n        <p>Check your email for your confirmation code, then enter it below:</p>\n\n        <form id="register_form">\n            <table>\n                <tr>\n                    <td align="right">email</td>\n                    <td><input id="email"  class="textbox" name="email" placeholder="Email" /></td>\n                </tr>\n                <tr>\n                    <td align="right">confirmation code</td>\n                    <td><input id="code" class="textbox" type="text" name="code" placeholder="Registration Code" /></td>\n                </tr>\n            </table>\n            <button type="button" id="submit">Confirm</button>\n        </form>\n        <p id='message' style='display:none'>Registration confirmed.  Click <a href='/login'>here</a> to login.</p>\n\n        <script>\n            System.import('/datum.js').then(function(AQ) {\n                var endpoint = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n\n                $('#submit').click(function() {\n                    endpoint.schema('endpoint').function('register_confirm', [\n                        $('#email').val(),\n                        $('#code').val()\n                    ]).then(function(reg) {\n                        $('form').hide();\n                        $('#message').show();\n                    }).catch(function(e,o) {\n                        alert( 'Confirmation failed.  Check your account details and try again.' );\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\x66e3e4b067d425f0d730c557d59137bfe46e9204af056209f2b5c1aeedb1a4a0	<div id="{{= id }}" class="{{= name }}">\n    Email: <input type="text" class="email" placeholder="Email" /><br>\n    Password: <input type="password" class="password" placeholder="Password" /><br>\n    \n    <button class="submit">Register</button><br>\n</div>
\\x6e41ebf6e20a575142da2e22b01309ec8a8d068a96c42565eb937b430f785b97	var w = $("#"+id);\n\n// Add redirect to links\nvar login_link = document.getElementById('login_link');\nlogin_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n\nvar confirm_link = document.getElementById('confirm_link');\nconfirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n\n\nw.find('#register_form').on('submit', function(e) {\n    e.preventDefault();\n\n    // Check that passwords match\n    if ($('#password').val() != $('#confirm_password').val()) {\n        $('#message').text('Passwords do not match');\n        return;\n    }\n\n    $('#message').empty();\n\n    db.schema('endpoint').function('register', [ $('#email').val(), $('#password').val() ])\n    .then(function() {\n        $('#message').text('Registration succeeded. Redirecting...');\n        $('#confirm_link').removeClass('hide');\n        /*\n        setTimeout(function() {\n            window.location = '/confirm' + window.location.search;\n        }, 2000);\n        */\n    });\n});\n
\\x763cca01135044ec49dae3b25108c9655463e0c93b844fdcf04dafe70d6ade50	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Aquameta - Login</title>\n        <script src='/system.js'></script>        \n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #login_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #login_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #login_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #login_form input#submit {\n                margin-left: 10%;\n            }\n            #login_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="login_form" method='POST' action='/login'>\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="submit" type="submit" value="Login">\n        </form>\n        <!--\n\t\t\t<p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\t\t-->\n\n        <script>\n            // Add a redirect back to this page\n            var reg_link = document.getElementById('register_link');\n            reg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>/*\n            System.import('/datum.js').then(function(AQ) {\n                var endpoint = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n\n                $('#login_form').on('submit', function(e) {\n                    e.preventDefault();\n\n\t\t\t\t\t// this is entirely wrong...\n                    endpoint.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                    \n                        alert('Logged in!');\n                    });\n                });\n\n            });\n            */\n        </script>\n    </body>\n</html>
\\x794404e872048e038f1aa19f306620da610f75c5684ec27452461a7145eeacdd	var w = $("#"+id);\n\n// Add a redirect back to this page\n/*\nvar reg_link = w.find('.register_link')[0];\nreg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n*/\n\n\nw.find('button.submit').click( function(e) {\n    endpoint.schema('endpoint').function('login', [ w.find('.email').val(), w.find('.password').val() ])\n    .catch(function(e,o) {\n        console.warn('fail: ', e, o);\n    })\n    .then(function(uuid) {\n        console.log(uuid);\n        alert('Logged in: '+uuid);\n    });\n});
\\x7a594fff999f375fd1650523fb07eda4d12fe23a34283a0a3733696c46aea7e9	422a2e6f-3bd5-4ef2-bd55-1019511331ff
\\x7adc625e076bd3702c7b5a1e6a399e913836515f2f571e3e79dfa20d38bf2f8d	dd3d2bc4-3b1f-4913-bba3-9288dbbb9a2e
\\x7e93fba0bc7adda858a2500090e639e4f563a3965c7cf4c719fb56eb6b12c666	/login
\\x7f07e4c60a29192771e7f43b7cea136f19f1b3c027cfd351186b645a0d48f7a1	<div id="{{= id }}" class="{{= name }}">\n    <div class="six columns">\n        <label for="exampleEmailInput">Your email</label>\n        <input class="u-full-width email" type="email" placeholder="test@mailbox.com" >\n    </div>\n\n    <div class="six columns">\n        <label for="exampleEmailInput">Password</label>\n        <input class="u-full-width password" type="password"  >\n    </div>\n\n\n\n        <button class="submit button-primary">Login</button>\n\n\n</div>\n
\\x7fbaeeb2ad0d1cba41bdacc0efa8badcd2b820f537bf3d9a84b0dd6b9d8486f2	var w = $("#"+id);\n\n// Add a redirect back to this page\n/*\nvar reg_link = w.find('.register_link')[0];\nreg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n*/\n\n\nw.find('button.submit').click( function(e) {\n    e.preventDefault();\n    \n    endpoint.schema('endpoint').function('login', [\n        w.find('.email').val(),\n        w.find('.password').val() \n    ])\n    .catch(function(e,o) {\n        alert('login was unsuccessful.');\n        console.warn('fail: ', e, o);\n    })\n    .then(function(uuid) {\n//         e.preventDefault();\n        console.log(uuid);\n        if (typeof redirect != 'undefined') {\n            window.location.href = redirect;\n        } else {\n            alert('Logged in!');\n            window.location.href='/';\n        }\n    });\n});
\\x82f0937d78ec851e7c70bd4eae4bfcec288a6854a1ffdae61871908460c3d9df	<div id="{{= id }}" class="{{= name }}">\n    <p>Check your email <span class='email_show'></span> and enter the registration code you received:</p>\n\n    <p>\n        <span class='email_span'>\n            Email:             <input type="text" class="email" placeholder="Email" /><br>\n        </span>\n        Confirmation code: <input type="text" class="code" placeholder="Registration Code" /><br>\n        <button class='submit button-primary'>Verify</button>\n    </p>\n</div>
\\x85bea35a83ac6d31641710269a9cb2e1c789322eb1ff565edd59cf79bb4174a9	ec901207-d295-43df-90ff-27cdf1a24f8e
\\x87780fa5de684e87cb92b279f0bc07b14f572851e73b8943a097c1770a5f38e6	register
\\x87c0f27397b360f6df8c71109d09c0f0946b91dd562bc69d9074f75feaf8260e	<div id="{{= id }}" class="{{= name }}">\n    <p>Check your email and enter the registration code you received:</p>\n\n    <p>\n        Email:             <input type="text" class="email" placeholder="Email" /><br>\n        Confirmation code: <input type="text" class="code" placeholder="Registration Code" /><br>\n        <button class='submit'>Verify</button>\n    </p>\n</div>
\\x8a5d9141e612db41f3c3295e80f283c5dff9f3a30d52ba2e2814a346ad7c7d81	var w = $("#"+id);\n\n// Add redirect to links\nvar login_link = document.getElementById('login_link');\nlogin_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n\nw.find('#register_form').on('submit', function(e) {\n    e.preventDefault();\n\n    $('#message').empty();\n\n    db.schema('endpoint').function('register_confirm', [ w.find('#email').val(), w.find('#code').val() ])\n    .then(function() {\n        $('#message').text('Registration confirmed.');\n        /*\n        setTimeout(function() {\n            window.location = '/login' + window.location.search;\n        }, 2000);\n        */\n    });\n});
\\x8db2d3a3301ac131bdc4045b810c3738e9c8e6ba572d74812cfb0e7dd4a01d30	<div id="{{= id }}" class="{{= name }}">\n    <p>\n        email: <input class="email"  class="textbox" name="email" placeholder="Email" /><br>\n        password: <input class="password" type="password" placeholder="Password" /><br>\n        <button class="submit">Login</button>\n    </p>\n    <p>Not registered? Sign up <a class='register_link' href='/register'>HERE</a></p>\n\n</div>
\\x8dbdb295b4143df72f9b6f1d43ac1b9a905d1859d404109ebaaa7dbb6b1489a4	var w = $("#"+id);\n\n// current_user returns a row if you're logged in, or no rows if you're anonymous\nendpoint.schema('endpoint').view('current_user').row().then(function( user ) {    \n    w.trigger('current_user', { user_row: user });\n    var display_name = user.get('name') ? user.get('name') : user.get('email');\n    w.find('.username').html(display_name);\n    w.find('.logged_in').show();\n    console.log("Current user " +\n                user.get('name') + ', ' +\n                user.get('email') + ', ' +\n                user.get('id'));\n}).catch(function(e,o) {\n\tw.find('.anonymous').show();\n    w.trigger('current_user_anonymous');\n    console.log("Current user anonymous");\n    console.log(e,o);\n});\n\n\n\n\n//////////// logout ///////////////\n\nfunction getCookie( name ) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row({\n        where: {\n            name: 'id',\n            op: '=',\n            value: getCookie('SESSION')\n        }\n    }).then(function(row) {\n        row.delete().then(function() {\n\t        location.reload(true);\n        });\n    }).catch(function(e, o) {\n        alert('logout failed');\n        console.log('logout failed: ',e,o);\n    });\n});\n
\\x8f662efe1706be457e75589acfc43d298b762c4dc9bae28216bcd92b3cb5dc33	4b8d1175-36af-41d4-b879-2bda0bcedafd
\\x90cacbecb868648ef58851187849536d70fa42300bd7d6b5621488c17c49563b	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Login</title>\n    </head>\n    <body>\n        <h1>Login</h1>\n        <form id="login_form" method='POST' action='/login'>\n            <table>\n                <tr>\n                    <td align='right'>email</td>\n                    <td><input type="text" name="email" placeholder="Email" /></td>\n                </tr>\n                <tr>\n                    <td align='right'>password</td>\n                    <td><input type="password" name="password" placeholder="Password" /></td>\n                </tr>\n            </table>\n            <input id="submit" type="submit" value="Login">\n        </form>\n    </body>\n</html>
\\x95871c328af25a9cecc90d625f5497b4c1a004b47f517f366b60ed0f50b62e80	<div id="{{= id }}" class="{{= name }}">\n    Email: <input type="text" class="email" placeholder="Email" /><br>\n    Password: <input type="password" class="password" placeholder="Password" /><br>\n    Password: <input type="password" class="confirm_password" placeholder="Confirm Password" /><br>\n    \n    <button class="submit">Register</button><br>\nâ‰ˆ</div>
\\x9628100080f1c512398f776149d733429aa225f4e75e1c54edbe299c7b9b1ac0	.{{= name }} .auth {\n    float: right;\n}
\\x990bf3fc79f9d05d04a5635e61dd8152a4ebd4b39a22f54eb4d18ceb9c0b0a89	3b86f811-be80-4c29-b946-5675cd31a0a0
\\x9af211329b2fc82e5efe906062c730082819b23fe8394bc435e0b1bf0458eb54	account
\\x9c5cca085db68de3b7a26afff7492e8cc97885531ce7ae7ae7a55d629dcb2a1b	56db9823-85d0-4ba9-aca0-67aaa78554cd
\\x9e10ba4502ed2a39243db233742fc23ce2f80afd5b2f48d6cf560e10b8de6bd9	var w = $("#"+id);\nvar username = false;\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\n\nendpoint.schema('endpoint').view('current_user').row().then(function( current_user ) {\n    var user = current_user.get('current_user');\n    \n    console.log('current_user = ', user);\n    if (user != 'anonymous') {\n        w.find('.username').html(user);\n        w.find('.logged_in').show();\n    } else {\n        w.find('.anonymous').show();\n    }\n});\n\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row().where({\n        token: getCookie('SESSION')\n    }).result(function(row) {\n        row.delete().done(function() {\n\t        location.reload(true);\n        });\n    });\n});\n\n
\\xa0f3c44c3fa7cf7f193071df1f463177104f033df7ef082fdeb72ba9f6472188	var w = $("#"+id);\n\n// Add a redirect back to this page\nvar reg_link = document.getElementById('register_link');\nreg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n\n\nw.find('#login_form').on('submit', function(e) {\n    e.preventDefault();\n\n    db.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n    .then(function() {\n        alert('Logged in!');\n    });\n});
\\xa2b19d82012609fe806a9afb30761a943480d0d23af3b34391c47c3a2828dd63	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Register</title>\n        <script src='/system.js'></script>\n    </head>\n    <body>\n        <h1>Register</h1>\n        \n        <form id="register_form">\n            <table>\n                <tr>\n                    <td>email</td>\n                    <td><input id="email" type="text" name="email" placeholder="Email" /></td>\n                </tr>\n                <tr>\n                    <td>password</td>\n                    <td><input id="password" type="password" name="password" placeholder="Password" /></td>\n                </tr>\n                <tr>\n                    <td>confirm password</td>\n                    <td><input id="confirm_password" type="password" name="confirm_password" placeholder="Confirm Password" /></td>\n                </tr>\n            </table>\n            <div id='message'></div>\n            <button type='button' id="reg">Register</button>\n        </form>\n        \n        <script>\n            System.import('/datum.js').then(function(AQ) {\n                var endpoint = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                \n                $('#reg').click(function() {\n                    // Check that passwords match\n                    if ($('#password').val() != $('#confirm_password').val()) {\n                        $('#message').text('Passwords do not match');\n                        return;\n                    }\n                    \n                    // fire request to register\n                    endpoint.schema('endpoint').function('register', [\n                        $('#email').val(),\n                        $('#password').val() \n                    ]).then(function(reg) {\n                        // TODO: https://github.com/aquametalabs/aquameta/issues/95\n                        console.log(reg);\n                        window.location = '/confirm';\n                    }).catch(function(e,o) {\n                        alert("Registration could not be completed.  Check console for more details. (FIXME)");\n                    });\n                });\n            });\n        </script>\n    </body>\n</html>\n
\\xa406c17b93019ed1a17b9d478cf0802d15736cef79c24031b11a4e47d5184aec	<div id="{{= id }}" class="{{= name }}">\n    Email: <input type="text" class="email" placeholder="Email" /><br>\n    Password: <input type="password" class="password" placeholder="Password" /><br>\n    \n    <button class="submit button-primary">Register</button><br>\n</div>
\\xaa89eeafb613b30d9f1dcfdcdb0e1ac50653d41b45c798e2018b42a623ddc879	66a8b4f8-09ad-49b0-aa32-c9b42182be3d
\\xacbb04e595f05ab05243501c0048a6826bf3c6599610de34db9fc32b219ceb91	<div id="{{= id }}" class="{{= name }}">\n    <div class='logged_in'>\n        <span class="username"></span><button class='logout'>logout</button>\n    </div>\n    <div class='anonymous'>\n    </div>\n</div>\n
\\xaed2343f46fe3b1e517917e9c6ef83b1d20396f1641b9ebcb647b5abd9301a6f	<div id="{{= id }}" class="{{= name }}">\n    <button class='logout'>Log Out</button>\n</div>
\\xb00963edf62063648bfbed7405c68e6edba762adec321ad88c6e8f6435046c8d	b4bc09d1-e0bf-437e-a24a-3b1a4a90b2ab
\\xb0c7f621693d8312f0371c0441c49d317feb2623a1174ecbfb31003039d3dc54	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Register</title>\n        <script src='/js/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="confirm_password" class="textbox" type="password" name="confirm_password" placeholder="Confirm Password" />\n            <input id="submit" type="submit" value="Register">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        <p id='confirm_link' class='hide'>You are registered. Click <a href='/confirm'>HERE</a> to enter confirmation code</p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n            \n            var confirm_link = document.getElementById('confirm_link');\n            confirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.1', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    // Check that passwords match\n                    if ($('#password').val() != $('#confirm_password').val()) {\n                        $('#message').text('Passwords do not match');\n                        return;\n                    }\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        $('#message').text('Registration succeeded. Redirecting...');\n                        $('#confirm_link').removeClass('hide');\n                        setTimeout(function() {\n                            window.location = '/confirm' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\xb2352c2ac215ab9f7cbe21b5e8d251cadc016c1acfaba6bb30e0889a301f6ddb	<div id="{{= id }}" class="{{= name }} item">\n    <div class='logged_in'>\n        <a href='/account' class="username"></a> <button class='logout'>logout</button>\n    </div>\n    <div class='anonymous'>\n        <a href='/login'>login</a>\n        <a href='/register'>register</a>\n    </div>\n</div>\n
\\xb5bea41b6c623f7c09f1bf24dcae58ebab3c0cdd90ad966bc43a45b44867e12b	true
\\xb6dc968cb49de1397337d6b2289e091600bfc29101815affca19d49d134c4336	var w = $("#"+id);\n\n/*\nvar confirm_link = document.getElementById('confirm_link');\nconfirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n*/\n\nw.find('button.submit').click(function(e) {\n    // Check that passwords match\n    /*\n    if (w.find('.password').val() != w.find('.confirm_password').val()) {\n        alert('Passwords do not match');\n        return;\n    }\n    */\n\n    // call register() function\n    endpoint.schema('endpoint').function('register', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function() {\n        w.replaceWith(widget('register_confirm', { email: w.find('.email').val() }));\n        /*\n        w.find('.message').text('Registration succeeded. Redirecting...');\n        w.find('.confirm_link').removeClass('hide');\n        setTimeout(function() {\n            window.location = '/confirm' + window.location.search;\n        }, 2000);\n        */\n    })\n    .catch(function(e,o) {\n        alert ('There was a problem registering');\n        console.log("Registration error:", e,o)\n        \n    });\n});\n
\\xb92f8135ea11f93f81757ed3ef01a17565b93256acb9e965a9f572f357fc546d	66550597-934b-4c1b-9e3c-6c3856e56e32
\\xbc3d1adb46e440607e0212f082f6da4bd4073ad255093992051caa33134a2c6a	<div id="{{= id }}" class="{{= name }}">\n    <form class="login_form" method='POST'>\n        <input class="email"  class="textbox" name="email" placeholder="Email" />\n        <input class="password" class="textbox" type="password" name="password" placeholder="Password" />\n        <input class="submit" type="submit" value="Login">\n    </form>\n    <p>Not registered? Sign up <a class='register_link' href='/register'>HERE</a></p>\n\n</div>
\\xbe4788ed4f19ac2e8da749aa522e139712ba9332ea5c8508b870c78d5f5970c6	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Aquameta - Login</title>\n        <script src='/js/system.js'></script>        \n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #login_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #login_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #login_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #login_form input#submit {\n                margin-left: 10%;\n            }\n            #login_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="login_form" method='POST'>\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="submit" type="submit" value="Login">\n        </form>\n        <p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\n        <script>\n            // Add a redirect back to this page\n            var reg_link = document.getElementById('register_link');\n            reg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/js/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#login_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    db.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        alert('Logged in!');\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>
\\xc3c5bd162b5f4b515f6e8b58bc472d92cd56e69e5c6bf70b3d6267d384912791	var w = $("#"+id);\nvar username = false;\n\nconsole.log("Authenticating........");\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\n\nendpoint.schema('endpoint').view('current_user').row()\n.then(function( user ) {\n    \n    // console.log('current_user = ', user);\n    \n    w.trigger('current_user', { user_row: user });\n    if (user.get('id') != 'anonymous') {\n        w.find('.username').html(user.get('email'));\n        w.find('.logged_in').show();\n    } else {\n        w.find('.anonymous').show();\n    }\n})\n.catch(function(e,o) {\n    w.trigger('current_user_anonymous');\n});\n\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row({\n        where: {\n            name: 'id',\n            op: '=',\n            value: getCookie('SESSION')\n        }\n    }).then(function(row) {\n        row.delete().then(function() {\n\t        location.reload(true);\n        });\n    }).catch(function(e, o) {\n        alert('logout failed');\n        console.log('logout failed: ',e,o);\n    });\n});\n\n
\\xc87b5d2c0a4db4867a3e24df89b0092707d20d018d1528ab8754ce85a8f39767	<!DOCTYPE html>\n<html>\n    <head>\n        <title>Aquameta - Register</title>\n        <script src='/system.js'></script>\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #register_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #register_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #register_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #register_form input#submit {\n                margin-left: 10%;\n            }\n            #register_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n            .hide {\n                display: none;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="confirm_password" class="textbox" type="password" name="confirm_password" placeholder="Confirm Password" />\n            <input id="submit" type="submit" value="Register">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        <p id='confirm_link' class='hide'>You are registered. Click <a href='/confirm'>HERE</a> to enter confirmation code</p>\n        \n        <script>\n            // Add redirect to links\n            var login_link = document.getElementById('login_link');\n            login_link.setAttribute('href', login_link.getAttribute('href') + window.location.search);\n            \n            var confirm_link = document.getElementById('confirm_link');\n            confirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#register_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    // Check that passwords match\n                    if ($('#password').val() != $('#confirm_password').val()) {\n                        $('#message').text('Passwords do not match');\n                        return;\n                    }\n\n                    $('#message').empty();\n\n                    db.schema('endpoint').function('register', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        $('#message').text('Registration succeeded. Redirecting...');\n                        $('#confirm_link').removeClass('hide');\n                        setTimeout(function() {\n                            window.location = '/confirm' + window.location.search;\n                        }, 2000);\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>\n
\\xcd2109861597e6eec6898105d3bcfe4b2d9011d9f825495f70b82ba614aa10f2	<div id="{{= id }}" class="{{= name }}">\n    <div class='logged_in'>\n        <a href='/account' class="username"></a> <button class='logout'>logout</button>\n    </div>\n    <div class='anonymous'>\n        <a href='/login'>login</a> <a href='/register'>register</a>\n    </div>\n</div>\n
\\xd01d297f955b33780c238649d32275c5a597796aa0887faa3c66ae069f895a9d	aa3d7a90-d6d0-4dfd-a2cd-5ba9665f5120
\\xd402d79506e00351473653c503be094d7285bef9f53755c81452abafac9d1d13	auth_manager
\\xd40d46d493b67c3e8f6ffe0626ac13db383df311b027666b31509b461ebf25a1	register_confirm
\\xd44d714c97a8ba98517b08f19c59d62180a922593c08941a7e1069ccc983e4e8	.{{= name }} .email_span {\n    display: none;\n}
\\xd4699c05385a1b2d25833634906ede50758073f02470a2072dd4483d6547b129	/register
\\xd5bd47a60def4eb3451c540ea01b2ff0b01f7bbb65e491cbcd1f822fc7e8f73c	var w = $("#"+id);\n\n/*\nvar confirm_link = document.getElementById('confirm_link');\nconfirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n*/\n\nw.find('button.submit').click(function(e) {\n    // Check that passwords match\n    if (w.find('.password').val() != w.find('.confirm_password').val()) {\n        alert('Passwords do not match');\n        return;\n    }\n    \n\t// call register() function\n    endpoint.schema('endpoint').function('register', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function() {\n        w.replaceWith(widget('register_confirm', { email: w.find('.email').val() }));\n        /*\n        w.find('.message').text('Registration succeeded. Redirecting...');\n        w.find('.confirm_link').removeClass('hide');\n        setTimeout(function() {\n            window.location = '/confirm' + window.location.search;\n        }, 2000);\n        */\n    });\n});\n
\\xd7100492c03a237d810dfb65048c4a4311f879738aed63c72cc77b7b79d9ac0b	login2
\\xd950421b48ced8451ca71c4643c247658690affd81d9b34358e1ed38644dc60a	var w = $("#"+id);\nvar username = false;\n\nfunction getCookie(name) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\ndb.schema('auth').view('current_user').row().result(function(row) {\n    username = row.get('current_user');\n    w.find('.username').html(username);\n});\n\nw.find('button').click(function() {\n    db.schema('auth').table('session').row().where({\n        token: getCookie('SESSION')\n    }).result(function(row) {\n        row.delete().done(function() {\n\t        location.reload(true);\n        });\n    });\n});\n\n\n
\\xdc7c6ebee806fa9806f1d70ae91cddd111289419571f8f6544db2ea5b5d43af5	<div id="{{= id }}" class="{{= name }}">\n    Email: <input type="text" class="email" placeholder="Email" /><br>\n    Password: <input type="password" class="password" placeholder="Password" /><br>\n    Password: <input type="password" class="confirm_password" placeholder="Confirm Password" /><br>\n    \n    <button class="submit">Register</button><br>\n    \n    <p>Already registered? <a class='sign_in_link' href='#'>Sign in</a>.</p>\n</div>
\\xdd2741e2734916143a6dbf1d1939cbc04396f10356faf54aba282066cec41b5f	944b5a05-be70-45a1-a549-1301d38799e4
\\xdd5764302f71ad1a2820a355efba886ab93e5b413e4bfb066184d71d51534868	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        \n        <script src='/system.js'></script>\n        <title>Account</title>\n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        \n        <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>\n        <style>\n            html {\n                box-sizing: border-box;\n                background-color: black;\n                color: white;\n            }\n            *, *:before, *:after {\n                box-sizing: inherit;\n            }\n            body {\n                font-family: 'Open Sans', sans-serif;\n            }\n            html, body {\n                height: 100%;\n                margin: 0;\n            }\n        </style>\n    </head>\n    <body></body>\n    <script>\n        System.import('/widget.js').then(function(widget) {\n            \n            var db = new AQ.Database('/endpoint/0.2', { evented: 'no' });\n            window.endpoint = db;\n            \n            AQ.Widget.import('org.aquameta.ui.auth', 'auth', db);\n            \n            $('body').append(widget('auth:account'));\n            \n        });\n    </script>\n</html>\n\n
\\xdfa59a81cfce0f956635786f6baefc88a9db8fc8252c2d8a8341c6c28dd74716	var w = $("#"+id);\n\n/*\nvar confirm_link = document.getElementById('confirm_link');\nconfirm_link.setAttribute('href', confirm_link.getAttribute('href') + window.location.search);\n*/\n\nw.find('button.submit').click(function(e) {\n    // Check that passwords match\n    /*\n    if (w.find('.password').val() != w.find('.confirm_password').val()) {\n        alert('Passwords do not match');\n        return;\n    }\n    */\n    \n\t// call register() function\n    endpoint.schema('endpoint').function('register', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function() {\n        w.replaceWith(widget('register_confirm', { email: w.find('.email').val() }));\n        /*\n        w.find('.message').text('Registration succeeded. Redirecting...');\n        w.find('.confirm_link').removeClass('hide');\n        setTimeout(function() {\n            window.location = '/confirm' + window.location.search;\n        }, 2000);\n        */\n    });\n});\n
\\xe4b08665b2511bc86ca7cf1116f4a4df34ec5c7f0a19329e166cd8a00e862382	return {};
\\xe8f544647f20d45b16762ef15ae503724eed11905de5ccddccc615c11344d283	<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>Aquameta - Login</title>\n        <script src='/js/system.js'></script>        \n        <meta http-equiv="Content-type" content="text/html; charset=utf-8">\n        <meta name="viewport" content="width=device-width">\n        <style>\n            body {\n                background-color: rgb(22,22,22);\n                font-family: "Anonymous Pro", monospace !important;\n            }\n            #login_form {\n                width: 400px;\n                background-color: rgb(40,40,40);\n                border-radius: 5px;\n                margin: auto;\n                padding: 1px;\n            }\n\n            #login_form input {\n                display: block;\n                margin-top: 5%;\n                margin-bottom: 5%;\n            }\n\n            #login_form input.textbox {\n                padding: 7px;\n                border-radius: 3px;\n                width: 75%;\n                margin-left: 10%;\n                outline-style: none;\n            }\n            #login_form input#submit {\n                margin-left: 10%;\n            }\n            #login_form #message {\n                margin-left: 10%;\n                color: #BBB;\n                margin-bottom: 5%;\n                width: 75%;\n            }\n            p {\n                color: white;\n            }\n        </style>\n    </head>\n    <body>\n        <form id="login_form" method='POST'>\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="submit" type="submit" value="Login">\n        </form>\n        <p>Not registered? Sign up <a id='register_link' href='/register'>HERE</a></p>\n\n        <script>\n            // Add a redirect back to this page\n            var reg_link = document.getElementById('register_link');\n            reg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n        </script>\n        \n        <script>\n            System.import('/js/widget.js').then(function(widget) {\n                var db = new AQ.Database('/endpoint/0.1', { evented: 'no' });\n                window.endpoint = db;\n\n                $('#login_form').on('submit', function(e) {\n                    e.preventDefault();\n\n                    db.schema('endpoint').function('login', [ $('#email').val(), $('#password').val() ])\n                    .then(function() {\n                        alert('Logged in!');\n                    });\n                });\n\n            });\n        </script>\n    </body>\n</html>
\\xee708723441b388932729199a88f7b3322ccf9e551f590dfe32bd07ffecf8ebc	var w = $("#"+id);\n\n// current_user returns a row if you're logged in, or no rows if you're anonymous\nendpoint.schema('endpoint').view('current_user').row().then(function( user ) {    \n    w.trigger('current_user', { user_row: user });\n    w.find('.username').html(user.get('name'));\n    w.find('.logged_in').show();\n    console.log("Current user " +\n                user.get('name') + ', ' +\n                user.get('email') + ', ' +\n                user.get('id'));\n}).catch(function(e,o) {\n\tw.find('.anonymous').show();\n    w.trigger('current_user_anonymous');\n    console.log("Current user anonymous");\n});\n\n\n\n\n//////////// logout ///////////////\n\nfunction getCookie( name ) {\n    var value = "; " + document.cookie;\n    var parts = value.split("; " + name + "=");\n    if (parts.length == 2) return parts.pop().split(";").shift();\n    return false;\n}\n\nw.find('button.logout').click(function() {\n    endpoint.schema('endpoint').table('session').row({\n        where: {\n            name: 'id',\n            op: '=',\n            value: getCookie('SESSION')\n        }\n    }).then(function(row) {\n        row.delete().then(function() {\n\t        location.reload(true);\n        });\n    }).catch(function(e, o) {\n        alert('logout failed');\n        console.log('logout failed: ',e,o);\n    });\n});\n
\\xf0a8683b9a7cb84f20020a74f2bd285e77259d6d92880e0bad4ae6e0607f87a0	var w = $("#"+id);\n\n// Add a redirect back to this page\n/*\nvar reg_link = w.find('.register_link')[0];\nreg_link.setAttribute('href', reg_link.getAttribute('href') + window.location.search);\n*/\n\n\nw.find('.login_form').on('submit', function(e) {\n    e.preventDefault();\n\n    endpoint.schema('endpoint').function('login', [ w.find('.email').val(), w.find('.password').val() ])\n    .then(function() {\n        alert('Logged in!');\n    });\n});
\\xf5e41c81e65db8550c3901214f251de53395416c23d5ef2536b4926b1aa0925b	<div id="{{= id }}" class="{{= name }}">\n    \n    \n        <form id="register_form">\n            <input id="email"  class="textbox" name="email" placeholder="Email" />\n            <input id="password" class="textbox" type="password" name="password" placeholder="Password" />\n            <input id="confirm_password" class="textbox" type="password" name="confirm_password" placeholder="Confirm Password" />\n            <input id="submit" type="submit" value="Register">\n            <p id='message'></p>\n        </form>\n        <p>Already registered? Sign in <a id='login_link' href='/login'>HERE</a></p>\n        <p id='confirm_link' class='hide'>You are registered. Click <a href='/confirm'>HERE</a> to enter confirmation code</p>\n</div>
\\xfd88c83414049c26936d600171ad77d64f3d5f5600188dec9155e50470f235eb	var w = $("#"+id);\n\nw.find('.auth').html(widget('auth:auth_manager'));\n\n// current_user returns a row if you're logged in, or no rows if you're anonymous\nendpoint.schema('endpoint').view('current_user').row().then(function( user ) {    \n    w.find('.name').html(user.get('name'));\n    w.find('.email').html(user.get('email'));\n    w.find('.id').html(user.get('id'));\n}).catch(function(e,o) {\n    \n});\n\n
\\xfd9a1cdd68d9f4b4857820d1b143eba77707ec441171064d6e01d6c6775a6cf0	<div id="{{= id }}" class="{{= name }}">\n    <div class='logged_in'>\n        Logged in: <span class="username"></span><button class='logout'>logout</button>\n    </div>\n    <div class='anonymous'>\n        Not logged in.\n    </div>\n</div>\n
